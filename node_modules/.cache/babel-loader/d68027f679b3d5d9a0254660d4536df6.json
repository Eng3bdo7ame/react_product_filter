{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Abdo Hamed\\\\Desktop\\\\Web_Site\\\\React\\\\React\\\\Egoan-main\\\\Egoan-main\\\\src\\\\contexts\\\\productsContext.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const productsContext = /*#__PURE__*/createContext();\n\nfunction ProductsState(props) {\n  _s();\n\n  // States\n  const [allProducts, setAllProducts] = useState([]);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [cartProducts, setCartProducts] = useState([]);\n  const [cartTotal, setCartTotal] = useState(0);\n  const [filterShow, setFilterShow] = useState(false); // Functoins\n\n  const getAllProducts = () => {\n    axios.get(\"https://api.escuelajs.co/api/v1/products\").then(res => setAllProducts(res.data));\n  };\n\n  const getProductById = id => {\n    return axios.get(`https://api.escuelajs.co/api/v1/products/${id}`).then(res => {\n      return res.data;\n    });\n  };\n\n  const addToCart = (product, amount) => {\n    const index = cartProducts.findIndex(e => e.id === product.id); // Exist\n\n    if (index >= 0) {\n      cartProducts[index].amount += amount;\n    } // Not Exist\n    else {\n      const newSell = {\n        id: product.id,\n        product: product,\n        amount: amount\n      };\n      setCartProducts([...cartProducts, newSell]);\n    }\n  };\n\n  const calcCartTotal = () => {\n    let total = 0;\n    cartProducts.map(ele => {\n      total += ele.product.price * ele.amount;\n    });\n    setCartTotal(total);\n  };\n\n  const clearFromCart = product => {\n    const index = cartProducts.findIndex(e => e.id === product.id);\n    cartProducts.splice(index, 1);\n    setCartProducts([...cartProducts]);\n    calcCartTotal();\n  };\n\n  const clearCart = () => {\n    setCartProducts([]);\n    setCartTotal(0);\n  };\n\n  const editProductAmount = (product, payload) => {\n    const index = cartProducts.findIndex(e => e.id === product.id); // Skip (only one condition)\n\n    if (payload === -1 && cartProducts[index].amount === 1) ;else {\n      cartProducts[index].amount += payload;\n      calcCartTotal();\n    }\n  };\n\n  const getAllCategories = () => {\n    axios.get(\" https://api.escuelajs.co/api/v1/categories\").then(res => {\n      setCategories(res.data);\n    });\n  };\n\n  const getFilteredProducts = function () {\n    let filter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    if (filter.length) {\n      const filtered = [];\n      filter.map(e => {\n        axios.get(`https://api.escuelajs.co/api/v1/categories/${e}/products`).then(res => {\n          filtered.push(res.data);\n        }).then(() => {\n          setFilteredProducts(filtered.flat());\n        });\n      });\n    } else setFilteredProducts([]);\n  };\n\n  const filterByPrice = (min, max) => {\n    if (filteredProducts.length) {\n      const filtered = filteredProducts.filter(prod => {\n        return prod.price >= min && prod.price <= max;\n      });\n      setFilteredProducts(filtered);\n    } else {\n      const filtered = allProducts.filter(prod => {\n        return prod.price >= min && prod.price <= max;\n      });\n      setAllProducts(filtered);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(productsContext.Provider, {\n    value: {\n      allProducts,\n      filteredProducts,\n      cartProducts,\n      cartTotal,\n      categories,\n      filterShow,\n      setFilterShow,\n      getAllCategories,\n      getAllProducts,\n      getProductById,\n      addToCart,\n      clearCart,\n      calcCartTotal,\n      clearFromCart,\n      editProductAmount,\n      getFilteredProducts,\n      filterByPrice\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ProductsState, \"ItHvO2WsH2Vk7VVrWj24Tg+Qwkg=\");\n\n_c = ProductsState;\nexport default ProductsState;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductsState\");","map":{"version":3,"names":["React","createContext","useState","axios","productsContext","ProductsState","props","allProducts","setAllProducts","filteredProducts","setFilteredProducts","categories","setCategories","cartProducts","setCartProducts","cartTotal","setCartTotal","filterShow","setFilterShow","getAllProducts","get","then","res","data","getProductById","id","addToCart","product","amount","index","findIndex","e","newSell","calcCartTotal","total","map","ele","price","clearFromCart","splice","clearCart","editProductAmount","payload","getAllCategories","getFilteredProducts","filter","length","filtered","push","flat","filterByPrice","min","max","prod","children"],"sources":["C:/Users/Abdo Hamed/Desktop/Web_Site/React/React/Egoan-main/Egoan-main/src/contexts/productsContext.js"],"sourcesContent":["import React, { createContext, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const productsContext = createContext();\r\n\r\nfunction ProductsState(props) {\r\n  // States\r\n  const [allProducts, setAllProducts] = useState([]);\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [cartProducts, setCartProducts] = useState([]);\r\n  const [cartTotal, setCartTotal] = useState(0);\r\n  const [filterShow, setFilterShow] = useState(false);\r\n\r\n  // Functoins\r\n  const getAllProducts = () => {\r\n    axios\r\n      .get(\"https://api.escuelajs.co/api/v1/products\")\r\n      .then((res) => setAllProducts(res.data));\r\n  };\r\n\r\n  const getProductById = (id) => {\r\n    return axios\r\n      .get(`https://api.escuelajs.co/api/v1/products/${id}`)\r\n      .then((res) => {\r\n        return res.data;\r\n      });\r\n  };\r\n\r\n  const addToCart = (product, amount) => {\r\n    const index = cartProducts.findIndex((e) => e.id === product.id);\r\n    // Exist\r\n    if (index >= 0) {\r\n      cartProducts[index].amount += amount;\r\n    }\r\n    // Not Exist\r\n    else {\r\n      const newSell = {\r\n        id: product.id,\r\n        product: product,\r\n        amount: amount,\r\n      };\r\n      setCartProducts([...cartProducts, newSell]);\r\n    }\r\n  };\r\n\r\n  const calcCartTotal = () => {\r\n    let total = 0;\r\n    cartProducts.map((ele) => {\r\n      total += ele.product.price * ele.amount;\r\n    });\r\n    setCartTotal(total);\r\n  };\r\n\r\n  const clearFromCart = (product) => {\r\n    const index = cartProducts.findIndex((e) => e.id === product.id);\r\n    cartProducts.splice(index, 1);\r\n    setCartProducts([...cartProducts]);\r\n    calcCartTotal();\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartProducts([]);\r\n    setCartTotal(0);\r\n  };\r\n\r\n  const editProductAmount = (product, payload) => {\r\n    const index = cartProducts.findIndex((e) => e.id === product.id);\r\n    // Skip (only one condition)\r\n    if (payload === -1 && cartProducts[index].amount === 1);\r\n    else {\r\n      cartProducts[index].amount += payload;\r\n      calcCartTotal();\r\n    }\r\n  };\r\n\r\n  const getAllCategories = () => {\r\n    axios.get(\" https://api.escuelajs.co/api/v1/categories\").then((res) => {\r\n      setCategories(res.data);\r\n    });\r\n  };\r\n\r\n  const getFilteredProducts = (filter = []) => {\r\n    if (filter.length) {\r\n      const filtered = [];\r\n      filter.map((e) => {\r\n        axios\r\n          .get(`https://api.escuelajs.co/api/v1/categories/${e}/products`)\r\n          .then((res) => {\r\n            filtered.push(res.data);\r\n          })\r\n          .then(() => {\r\n            setFilteredProducts(filtered.flat());\r\n          });\r\n      });\r\n    } else setFilteredProducts([]);\r\n  };\r\n\r\n  const filterByPrice = (min, max) => {\r\n    if (filteredProducts.length) {\r\n      const filtered = filteredProducts.filter((prod) => {\r\n        return prod.price >= min && prod.price <= max;\r\n      });\r\n      setFilteredProducts(filtered);\r\n    } else {\r\n      const filtered = allProducts.filter((prod) => {\r\n        return prod.price >= min && prod.price <= max;\r\n      });\r\n      setAllProducts(filtered);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <productsContext.Provider\r\n      value={{\r\n        allProducts,\r\n        filteredProducts,\r\n        cartProducts,\r\n        cartTotal,\r\n        categories,\r\n        filterShow,\r\n        setFilterShow,\r\n        getAllCategories,\r\n        getAllProducts,\r\n        getProductById,\r\n        addToCart,\r\n        clearCart,\r\n        calcCartTotal,\r\n        clearFromCart,\r\n        editProductAmount,\r\n        getFilteredProducts,\r\n        filterByPrice,\r\n      }}\r\n    >\r\n      {props.children}\r\n    </productsContext.Provider>\r\n  );\r\n}\r\nexport default ProductsState;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}